\section{Theoretical Analysis}
\label{sec:analysis}
In this section, the circuit shown in Figure~\ref{fig:circuit} is analysed
theoretically. We will begin by analyzing the Gain Stage circuit and, after that, the Output Stage circuit.
%in order to predict their outputs. 

Thus, we will start by computing the Operating Point using the theoretical DC
model studied and comparing it to Ngspice’s OP.

Then, we will compute the gain and input and output impedances separately for the 2 stages. 

Finally, we will compute the frequency response Vo(f)/Vi(f).

%The theoretical values will be obtained by applying Kirchhoff laws and the diode equations.
%Considering the circuit of Figure~\ref{fig:circuit}, it is composed by a Voltage source, a transformer, an envelope detector and a voltage regulator.
\subsection{Gain Stage}
In this subsection, we will analyze the Gain Stage circuit.

In order to make this task easier, we used Thévenin's equivalent of bias circuit. Its diagram is represented in Figure~\ref{fig:gscircuit} as well as the BC547A model used in this assignment is shown in table~\ref{tab:bgs}.

\begin{figure}[H] \centering
\includegraphics[width=0.8\linewidth]{gainstage.pdf}
\caption{Gain Stage Circuit}                                     %%%%%%%%%%LEGENDA
\label{fig:gscircuit}
\end{figure}


\begin{table}[H]
  \centering
  \begin{tabular}{|l|r|}
     \hline    
    {\bf Name} & {\bf Value} \\ \hline   
    \input{../mat/GSBijector_tab}
  \end{tabular}
  \caption{BC547A model}
  \label{tab:bgs}
\end{table}

\subsubsection{Operating Point}
Considering the equations of the lecture 17 and the theoretical DC model studied , we compute the OP. The table~\ref{tab:opgs} presents the results obtained.

\begin{table}[H]
  \centering
  \begin{tabular}{|l|r|}
     \hline    
    {\bf Name} & {\bf Value} \\ \hline   
    \input{../mat/GSOP_tab}
  \end{tabular}
  \caption{OP - Gain Stage}
  \label{tab:opgs}
\end{table}

\subsubsection{Gain and Input and Output Impedances}

\begin{table}[H]
  \centering
  \begin{tabular}{|l|r|}
     \hline    
    {\bf Name} & {\bf Value} \\ \hline   
    \input{../mat/GSAV_tab}
  \end{tabular}
  \caption{Gain - Gain Stage}
  \label{tab:avgs}
\end{table}

\begin{table}[H]
  \centering
  \begin{tabular}{|l|r|}
     \hline    
    {\bf Name} & {\bf Value} \\ \hline   
    \input{../mat/GSZ_tab}
  \end{tabular}
  \caption{Input and Output Impedances - Gain Stage}
  \label{tab:zgs}
\end{table}

\subsection{Output Stage}

\begin{table}[H]
  \centering
  \begin{tabular}{|l|r|}
     \hline    
    {\bf Name} & {\bf Value} \\ \hline   
    \input{../mat/OSBijector_tab}
  \end{tabular}
  \caption{BC557A model}
  \label{tab:modelos}
\end{table}

\subsubsection{Operating Point}

\begin{table}[H]
  \centering
  \begin{tabular}{|l|r|}
     \hline    
    {\bf Name} & {\bf Value} \\ \hline   
    \input{../mat/OSOP_tab}
  \end{tabular}
  \caption{Operating Point}
  \label{tab:osop}
\end{table}

\subsubsection{Gain and Input and Output Impedances}

\begin{table}[H]
  \centering
  \begin{tabular}{|l|r|}
     \hline    
    {\bf Name} & {\bf Value} \\ \hline   
    \input{../mat/OSAV_tab}
  \end{tabular}
  \caption{Gain}
  \label{tab:osav}
\end{table}

\begin{table}[H]
  \centering
  \begin{tabular}{|l|r|}
     \hline    
    {\bf Name} & {\bf Value} \\ \hline   
    \input{../mat/OSZ_tab}
  \end{tabular}
  \caption{Input and Output Impedances}
  \label{tab:osz}
\end{table}

\subsection{Final}

\begin{table}[H]
  \centering
  \begin{tabular}{|l|r|}
     \hline    
    {\bf Name} & {\bf Value} \\ \hline   
    \input{../mat/Final_tab}
  \end{tabular}
  \caption{Output Values}
  \label{tab:finaltab}
\end{table}

